<!doctype html>
<html>
    <head>
        <title>Eve ship</title>
        <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.2.0/pure-min.css">
        <link rel="stylesheet" href="/css/ship.css" />
    </head>
    <body>
        <div id="application">
        </div>

        <script src="/shared/promise.js"></script>
        <script src="/shared/utils.js"></script>
        <script src="/shared/list-promise.js"></script>
        <script src="/js/ajax-promise.js"></script>

        <script>
        collect([
            js('/shared/micro.js', '/shared/marked.js', '/template/item.js'),
            json('/api/item/24690'),
            json('/api/item/24690/attributes'),
            json('/api/item/24690/skills'),
        ]).then(function(res) {
            var skills = res.pop(),
                attributes = res.pop(),
                ship = res.pop();

            document.getElementById('application').innerHTML = templates['ship'](ship);
        });
        
        </script>
        
        <!--
            // Firefox nightly
        task(function () {
            // Pull dependencies
            yield js(
                '/shared/micro.js',
                '/shared/marked.js',
                '/template/item.js',
                '/template/item-summary.js',
                '/template/attribute-list.js',
                '/template/skill-list.js'
            );
            
            var results = yield collect(
                    json('/api/item/24690'),
                    json('/api/item/24690/attributes'),
                    json('/api/item/24690/skills')
                ).zip('item', 'attributes', 'skills');
            
            document.getElementById('application').innerHTML = templates['item-summary'](results.item);
        });
            
        -->
    </body>
</html>